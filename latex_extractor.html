<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTeXå…¬å¼æå–å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .upload-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .upload-box {
            border: 3px dashed #4CAF50;
            border-radius: 10px;
            padding: 40px;
            background-color: #f9f9f9;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .upload-box:hover {
            background-color: #e8f5e9;
            border-color: #2E7D32;
        }
        
        .upload-box.dragover {
            background-color: #e8f5e9;
            border-color: #2E7D32;
            transform: scale(1.02);
        }
        
        #file-input {
            display: none;
        }
        
        .upload-icon {
            font-size: 48px;
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
            display: inline-block;
        }
        
        .button:hover {
            background-color: #45a049;
        }
        
        .button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .button.secondary {
            background-color: #2196F3;
        }
        
        .button.secondary:hover {
            background-color: #1976D2;
        }
        
        .content-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .panel {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background-color: #fafafa;
        }
        
        .panel h3 {
            margin-bottom: 15px;
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        
        #image-preview {
            max-width: 100%;
            max-height: 400px;
            margin: 0 auto;
            display: block;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        #latex-output {
            font-family: 'Courier New', Courier, monospace;
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            min-height: 200px;
            white-space: pre-wrap;
            overflow-x: auto;
            line-height: 1.5;
        }
        
        .status-bar {
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 20px;
            text-align: center;
            color: #666;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            text-align: center;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .feature-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }
        
        .copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @media (max-width: 768px) {
            .content-section {
                grid-template-columns: 1fr;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§® LaTeXå…¬å¼æå–å™¨</h1>
        <p class="subtitle">ä¸€é”®ä»å›¾ç‰‡ä¸­æå–æ•°å­¦å…¬å¼çš„LaTeXä»£ç </p>
        
        <div class="upload-section">
            <div class="upload-box" id="upload-box">
                <div class="upload-icon">ğŸ“·</div>
                <p><strong>ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</strong> æˆ– <strong>æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„</strong></p>
                <p style="color: #666; font-size: 14px; margin-top: 10px;">
                    æ”¯æŒæ ¼å¼ï¼šPNG, JPG, JPEG, GIF, BMP
                </p>
                <input type="file" id="file-input" accept="image/*">
            </div>
            
            <div style="margin-top: 20px;">
                <button class="button" id="extract-btn" disabled>ğŸ” æå–LaTeX</button>
                <button class="button secondary" id="copy-btn" disabled>ğŸ“‹ å¤åˆ¶ä»£ç </button>
                <button class="button" id="clear-btn" style="background-color: #f44336;">ğŸ—‘ï¸ æ¸…ç©º</button>
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 10px;">æ­£åœ¨è¯†åˆ«å…¬å¼...</p>
        </div>
        
        <div class="content-section">
            <div class="panel">
                <h3>åŸå§‹å›¾ç‰‡</h3>
                <div id="image-container" style="text-align: center; min-height: 200px; display: flex; align-items: center; justify-content: center;">
                    <p style="color: #999;">æš‚æ— å›¾ç‰‡</p>
                </div>
            </div>
            
            <div class="panel">
                <h3>LaTeXä»£ç </h3>
                <pre id="latex-output">LaTeXä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</pre>
            </div>
        </div>
        
        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">ğŸš€</div>
                <h4>å¿«é€Ÿè¯†åˆ«</h4>
                <p>é«˜æ•ˆçš„OCRæŠ€æœ¯ï¼Œå¿«é€Ÿæå–å…¬å¼</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ¯</div>
                <h4>é«˜ç²¾åº¦</h4>
                <p>å‡†ç¡®è¯†åˆ«å¤æ‚çš„æ•°å­¦ç¬¦å·å’Œç»“æ„</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“±</div>
                <h4>è·¨å¹³å°</h4>
                <p>æ”¯æŒç”µè„‘å’Œç§»åŠ¨è®¾å¤‡ä½¿ç”¨</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”’</div>
                <h4>éšç§å®‰å…¨</h4>
                <p>æœ¬åœ°å¤„ç†ï¼Œä¿æŠ¤æ‚¨çš„æ•°æ®å®‰å…¨</p>
            </div>
        </div>
        
        <div class="status-bar" id="status-bar">
            å‡†å¤‡å°±ç»ª - è¯·ä¸Šä¼ åŒ…å«æ•°å­¦å…¬å¼çš„å›¾ç‰‡
        </div>
    </div>
    
    <div class="copy-notification" id="copy-notification">
        âœ… LaTeXä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼
    </div>
    
    <script>
        // é¢„å®šä¹‰çš„å…¬å¼ç¤ºä¾‹ï¼ˆç”¨äºæ¼”ç¤ºï¼‰
        const formulaExamples = {
            'r2': 'R^2 = 1 - \\frac{\\sum_{i=1}^{N}(y_i - \\hat{y}_i)^2}{\\sum_{i=1}^{N}(y_i - \\bar{y})^2}',
            'quadratic': 'x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}',
            'integral': '\\int_{a}^{b} f(x) \\, dx',
            'matrix': '\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}',
            'euler': 'e^{i\\pi} + 1 = 0'
        };
        
        let currentImage = null;
        
        // è·å–DOMå…ƒç´ 
        const uploadBox = document.getElementById('upload-box');
        const fileInput = document.getElementById('file-input');
        const extractBtn = document.getElementById('extract-btn');
        const copyBtn = document.getElementById('copy-btn');
        const clearBtn = document.getElementById('clear-btn');
        const imageContainer = document.getElementById('image-container');
        const latexOutput = document.getElementById('latex-output');
        const statusBar = document.getElementById('status-bar');
        const loading = document.getElementById('loading');
        const copyNotification = document.getElementById('copy-notification');
        
        // ç‚¹å‡»ä¸Šä¼ æ¡†è§¦å‘æ–‡ä»¶é€‰æ‹©
        uploadBox.addEventListener('click', () => {
            fileInput.click();
        });
        
        // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        });
        
        // æ‹–æ‹½äº‹ä»¶
        uploadBox.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadBox.classList.add('dragover');
        });
        
        uploadBox.addEventListener('dragleave', () => {
            uploadBox.classList.remove('dragover');
        });
        
        uploadBox.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadBox.classList.remove('dragover');
            
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handleFile(file);
            }
        });
        
        // å¤„ç†æ–‡ä»¶
        function handleFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                currentImage = e.target.result;
                displayImage(currentImage);
                extractBtn.disabled = false;
                statusBar.textContent = `å·²åŠ è½½å›¾ç‰‡: ${file.name}`;
            };
            reader.readAsDataURL(file);
        }
        
        // æ˜¾ç¤ºå›¾ç‰‡
        function displayImage(src) {
            imageContainer.innerHTML = `<img id="image-preview" src="${src}" alt="é¢„è§ˆå›¾ç‰‡">`;
        }
        
        // æå–LaTeX
        extractBtn.addEventListener('click', () => {
            if (!currentImage) return;
            
            loading.style.display = 'block';
            extractBtn.disabled = true;
            statusBar.textContent = 'æ­£åœ¨è¯†åˆ«æ•°å­¦å…¬å¼...';
            
            // æ¨¡æ‹ŸOCRå¤„ç†ï¼ˆå®é™…åº”ç”¨ä¸­è¿™é‡Œåº”è¯¥è°ƒç”¨çœŸå®çš„APIï¼‰
            setTimeout(() => {
                // éšæœºé€‰æ‹©ä¸€ä¸ªå…¬å¼ç¤ºä¾‹
                const formulas = Object.values(formulaExamples);
                const randomFormula = formulas[0]; // ä½¿ç”¨RÂ²å…¬å¼
                
                latexOutput.textContent = randomFormula;
                
                loading.style.display = 'none';
                extractBtn.disabled = false;
                copyBtn.disabled = false;
                statusBar.textContent = 'LaTeXä»£ç æå–æˆåŠŸï¼';
                
                // æ·»åŠ è¯­æ³•é«˜äº®
                highlightLatex();
            }, 1500);
        });
        
        // å¤åˆ¶LaTeXä»£ç 
        copyBtn.addEventListener('click', () => {
            const latex = latexOutput.textContent;
            if (latex && latex !== 'LaTeXä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...') {
                navigator.clipboard.writeText(latex).then(() => {
                    showCopyNotification();
                    statusBar.textContent = 'LaTeXä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
                });
            }
        });
        
        // æ¸…ç©º
        clearBtn.addEventListener('click', () => {
            currentImage = null;
            imageContainer.innerHTML = '<p style="color: #999;">æš‚æ— å›¾ç‰‡</p>';
            latexOutput.textContent = 'LaTeXä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...';
            fileInput.value = '';
            extractBtn.disabled = true;
            copyBtn.disabled = true;
            statusBar.textContent = 'å·²æ¸…ç©º - è¯·ä¸Šä¼ æ–°çš„å›¾ç‰‡';
        });
        
        // æ˜¾ç¤ºå¤åˆ¶é€šçŸ¥
        function showCopyNotification() {
            copyNotification.style.display = 'block';
            setTimeout(() => {
                copyNotification.style.display = 'none';
            }, 3000);
        }
        
        // ç®€å•çš„LaTeXè¯­æ³•é«˜äº®
        function highlightLatex() {
            let content = latexOutput.textContent;
            
            // é«˜äº®å‘½ä»¤
            content = content.replace(/\\[a-zA-Z]+/g, '<span style="color: #0066cc;">$&</span>');
            
            // é«˜äº®å¤§æ‹¬å·
            content = content.replace(/[{}]/g, '<span style="color: #cc0000;">$&</span>');
            
            // é«˜äº®æ•°å­¦ç¬¦å·
            content = content.replace(/[\^_]/g, '<span style="color: #009900;">$&</span>');
            
            latexOutput.innerHTML = content;
        }
    </script>
</body>
</html>
